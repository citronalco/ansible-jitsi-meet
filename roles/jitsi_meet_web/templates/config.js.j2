// get default config
<!--#include file="config-default.js" -->

// override default example domain names
config.hosts.domain = '{{ inventory_hostname }}'';
config.hosts.anonymousdomain = 'guest.{{ inventory_hostname }}';
config.hosts.muc = 'conference.{{ inventory_hostname }}';
config.bosh = 'https://{{ inventory_hostname }}/http-bind';
config.p2p.stunServers = [
    //{ urls: 'stun:meet-jit-si-turnrelay.jitsi.net:443' },
    { urls: 'stun:{{ inventory_hostname }}:3478' },
    { urls: 'stun:{{ inventory_hostname }}:5349' }
];

{% if turns_hostname is defined %}
// to be able to multiplex Jitsi Meet and Coturn on port 443, we have to use bosh instead of websockets
config.websocket = undefined;
config.preferBosh = true;
{% else %}
config.websocket = 'wss://{{ inventory_hostname }}/xmpp-websocket';
{% endif %}

let configDefault = JSON.parse(JSON.stringify(config));
config = {}

// get custom config
<!--#include file="config-custom.js" -->

// merge configs
config = Object.assign({}, configDefault, config);
