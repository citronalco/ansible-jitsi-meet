// {{ ansible_managed }}

// get default config
<!--#include file="config.default.js" -->

// override default example domain names
config.hosts.domain = '{{ inventory_hostname }}';
config.hosts.anonymousdomain = 'guest.{{ inventory_hostname }}';
config.hosts.muc = 'conference.{{ inventory_hostname }}';
config.bosh = 'https://{{ inventory_hostname }}/http-bind';
config.p2p.stunServers = [
    //{ urls: 'stun:meet-jit-si-turnrelay.jitsi.net:443' },
    { urls: 'stun:{{ inventory_hostname }}:3478' },
    { urls: 'stun:{{ inventory_hostname }}:5349' }
];

config.websocket = 'wss://{{ inventory_hostname }}/xmpp-websocket';
websocketKeepAliveUrl: 'https://{{ inventory_hostname }}/' + subdir + '_unlock',

// if websocket and bosh are configured, prefer bosh
config.preferBosh = true;

let configDefault = JSON.parse(JSON.stringify(config));
config = {}

// get custom config
<!--#include file="config.local.js" -->

// merge configs
config = Object.assign({}, configDefault, config);
